(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(6053)}])},6053:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return pages}});var n=i(5893),a=i(7294),s=i(6966),r=i(6969),l=i(474),o=i(1621),d=i(8872),c=i(6154),h=i(9138),m=i(3211),p=i(9271),u=i(7230),g=i(7289),f=i(3872),S=a.memo(e=>{let{status:t}=e;t=t.toLowerCase();let i=(0,a.useMemo)(()=>({arrived:p.p,arrived_late:p.p,arrived_invalid:p.p,left:u.L,left_invalid:u.L,invalid:g.P}),[]),s=(0,a.useMemo)(()=>({arrived:"green",arrived_late:"gold",arrived_invalid:"red",left:"green",left_invalid:"red",invalid:"red"}),[]),r=i[t]||f.y,l=s[t]||s.default;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m.u,{renderTip:t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),children:(0,n.jsx)(r,{style:{color:l,stroke:l,strokeWidth:"75px",transform:"scale(1.25)"}})})})}),x=i(3966),v=i(5236);let SortableTable=class SortableTable extends a.Component{componentDidUpdate(e,t){(t.sortBy!==this.state.sortBy||t.ascending!==this.state.ascending)&&this.updateParentState()}renderHeaderRow(e){let{headers:t}=this.props,{sortBy:i}=this.state;return(0,n.jsx)(x.i.Row,{children:(t||[]).map(t=>{let{id:a,text:s}=t;return(0,n.jsx)(x.i.ColHeader,{id:a,...e&&{stackedSortByLabel:s,onRequestSort:this.handleSort,sortDirection:a===i?e:"none"},children:s},a)})})}render(){let{caption:e,headers:t,rows:i}=this.props,{sortBy:a,ascending:s}=this.state,r=s?"ascending":"descending",l=[...i||[]];return(0,n.jsx)(v.E,{query:{small:{maxWidth:"40rem"},large:{minWidth:"41rem"}},props:{small:{layout:"stacked"},large:{layout:"auto"}},children:i=>(0,n.jsx)("div",{children:(0,n.jsxs)(x.i,{caption:"".concat(e,": sorted by ").concat(a," in ").concat(r," order"),...i,children:[(0,n.jsx)(x.i.Head,{renderSortLabel:"Sort by",children:this.renderHeaderRow(r)}),(0,n.jsx)(x.i.Body,{children:l.map(e=>(0,n.jsx)(x.i.Row,{children:t.map(t=>{let{id:i}=t;return(0,n.jsx)(x.i.Cell,{children:"type"===i?(0,n.jsx)(S,{status:e[i]}):e[i]},i)})},e.id))})]})})})}constructor(e){super(e),this.handleSort=(e,t)=>{let{id:i}=t,{sortBy:n,ascending:a}=this.state;this.setState({sortBy:i,ascending:!a})},this.updateParentState=()=>{let{handleSorting:e}=this.props;e(this.state)},this.state={sortBy:e.sortBy,ascending:!0}}};var D=i(5215),T=i(2518),b=i(7285),O=i(1460),I=i(1934),y=i(7456),C=i(381),j=i.n(C);let DateSelect=class DateSelect extends a.Component{renderDays(){let{renderedDate:e,selectedDate:t,todayDate:i}=this.state;return this.generateMonth().map(a=>{let s=a.toISOString();return(0,n.jsx)(D.W.Day,{date:s,interaction:this.isDisabledDate(a)?"disabled":"enabled",isSelected:a.isSame(t,"day"),isToday:a.isSame(i,"day"),isOutsideMonth:!a.isSame(e,"month"),label:"".concat(a.format("D")," ").concat(a.format("MMMM")," ").concat(a.format("YYYY")),onClick:e=>this.handleDayClick(e,{date:s}),children:a.format("D")},s)})}render(){let{value:e,isShowingCalendar:t,renderedDate:i,messages:a}=this.state,s=parseDate(this.state.renderedDate),buttonProps=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"prev";return{size:"small",withBackground:!1,withBorder:!1,renderIcon:"prev"===e?(0,n.jsx)(T.v,{color:"primary"}):(0,n.jsx)(b.g,{color:"primary"}),screenReaderLabel:"prev"===e?"Previous month":"Next month"}};return(0,n.jsxs)("div",{className:"date-input-box",children:[(0,n.jsx)(O.h,{className:"triangle-button",...buttonProps("prev"),size:"medium",onClick:this.handleSelectPrevDay}),(0,n.jsx)(D.W,{renderLabel:"",assistiveText:"Type a date or use arrow keys to navigate date picker.",value:e,onChange:this.handleChange,width:"10rem",isInline:!0,messages:a,isShowingCalendar:t,onRequestValidateDate:this.handleValidateDate,onRequestShowCalendar:this.handleShowCalendar,onRequestHideCalendar:this.handleHideCalendar,onRequestSelectNextDay:this.handleSelectNextDay,onRequestSelectPrevDay:this.handleSelectPrevDay,onRequestRenderNextMonth:this.handleRenderNextMonth,onRequestRenderPrevMonth:this.handleRenderPrevMonth,renderNavigationLabel:(0,n.jsxs)("span",{children:[(0,n.jsx)("div",{children:s.format("MMMM")}),(0,n.jsx)("div",{children:s.format("YYYY")})]}),renderPrevMonthButton:(0,n.jsx)(O.h,{...buttonProps("prev")}),renderNextMonthButton:(0,n.jsx)(O.h,{...buttonProps("next")}),renderWeekdayLabels:this.renderWeekdayLabels(),interaction:this.props.disabled?"disabled":"enabled",children:this.renderDays()}),(0,n.jsx)(O.h,{className:"triangle-button",...buttonProps("next"),size:"medium",onClick:this.handleSelectNextDay})]})}constructor(e){var t;super(e),t=this,this.formatDate=e=>{let t=parseDate(e);return"".concat(t.format("MM/DD/YYYY"))},this.state={value:this.formatDate(this.props.currentDate.toISOString()),isShowingCalendar:!1,todayDate:this.props.currentDate.toISOString(),selectedDate:this.props.currentDate.toISOString(),renderedDate:this.props.currentDate.toISOString(),disabledDates:[],messages:[]},this.generateMonth=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.renderedDate,i=parseDate(e).startOf("month").startOf("week");return Array.apply(null,Array(I.f.DAY_COUNT)).map(()=>{let e=i.clone();return i.add(1,"days"),e})},this.handleChange=(e,t)=>{let{value:i}=t,n=parseDate(i).toISOString();this.props.setCurrentDate(new Date(n)),this.setState(e=>{let{renderedDate:t}=e;return{value:i,selectedDate:n,renderedDate:n||t,messages:[]}})},this.handleShowCalendar=e=>{this.setState({isShowingCalendar:!0})},this.handleHideCalendar=e=>{this.setState(e=>{let{selectedDate:t,disabledDates:i,value:n}=e;return{isShowingCalendar:!1,value:t?this.formatDate(t):n}})},this.handleValidateDate=e=>{this.setState(e=>{let{selectedDate:t,value:i}=e,n=[];return!t&&i&&(n=[{type:"error",text:"This date is invalid"}]),t&&this.isDisabledDate(parseDate(t))&&(n=[{type:"error",text:"This date is disabled"}]),{...e,messages:n}})},this.handleDayClick=(e,t)=>{let{date:i}=t;this.props.setCurrentDate(new Date(i)),this.setState({selectedDate:i,renderedDate:i,messages:[]})},this.handleSelectNextDay=e=>{this.modifySelectedDate("day",1)},this.handleSelectPrevDay=e=>{this.modifySelectedDate("day",-1)},this.handleRenderNextMonth=e=>{this.modifyRenderedDate("month",1)},this.handleRenderPrevMonth=e=>{this.modifyRenderedDate("month",-1)},this.modifyRenderedDate=(e,t)=>{this.setState(i=>{let{renderedDate:n}=i;return{renderedDate:this.modifyDate(n,e,t)}})},this.modifySelectedDate=(e,t)=>{this.setState(i=>{let{selectedDate:n,renderedDate:a}=i,s=n?this.modifyDate(n,e,t):parseDate(a).startOf("month").toISOString();return this.props.setCurrentDate(new Date(s)),{selectedDate:s,renderedDate:s,value:this.formatDate(s),messages:[]}})},this.modifyDate=(e,t,i)=>{let n=parseDate(e);return n.add(i,t),n.toISOString()},this.isDisabledDate=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.state.disabledDates;return i.reduce((t,i)=>t||e.isSame(i,"day"),!1)},this.renderWeekdayLabels=()=>{let e=parseDate(this.state.renderedDate).startOf("week");return Array.apply(null,Array(7)).map(()=>{let t=e.clone();return e.add(1,"day"),(0,n.jsx)(y.S,{alt:t.format("dddd"),children:t.format("dd")},t.format("dddd"))})}}};let parseDate=e=>j().tz(e,[j().ISO_8601,"llll","LLLL","lll","LLL","ll","LL","l","L"],"en-us","America/Denver");var N=i(7926),w=i(7856);let MultipleSelect=class MultipleSelect extends a.Component{getOptionById(e){return this.props.options.find(t=>{let{id:i}=t;return i===e})}componentDidUpdate(e,t){t.selectedOptionId!==this.state.selectedOptionId&&this.updateParentState(),e.selectedTypeIDs!==this.props.selectedTypeIDs&&this.setState({selectedOptionId:this.props.selectedTypeIDs})}getOptionsChangedMessage(e){let t=e.length!==this.state.filteredOptions.length?"".concat(e.length," options available."):null;if(t&&e.length>0&&this.state.highlightedOptionId!==e[0].id){let n=this.getOptionById(e[0].id);if(n){var i;let e=(null===(i=this.getOptionById(n.id))||void 0===i?void 0:i.label)||"Unknown";t="".concat(e,". ").concat(t)}}return t}matchValue(){let{filteredOptions:e,inputValue:t,highlightedOptionId:i,selectedOptionId:n}=this.state;if(1===e.length){let i=e[0];if(i.label.toLowerCase()===t.toLowerCase())return{inputValue:"",selectedOptionId:[...n,i.id],filteredOptions:this.filterOptions("")}}if(i&&t===this.getOptionById(i).label)return{inputValue:"",filteredOptions:this.filterOptions("")}}dismissTag(e,t){e.stopPropagation(),e.preventDefault();let i=this.state.selectedOptionId.filter(e=>e!==t);this.setState({selectedOptionId:i,highlightedOptionId:null},()=>{this.inputRef.focus()})}renderTags(){let{selectedOptionId:e}=this.state;return e.map((e,t)=>{var i,a;return(0,n.jsx)(N.V,{dismissible:!0,title:"Remove ".concat(null===(i=this.getOptionById(e))||void 0===i?void 0:i.label),text:null===(a=this.getOptionById(e))||void 0===a?void 0:a.label,margin:t>0?"xxx-small 0 xxx-small xx-small":"xxx-small 0",onClick:t=>this.dismissTag(t,e)},e)})}render(){let{inputValue:e,isShowingOptions:t,highlightedOptionId:i,selectedOptionId:a,filteredOptions:s}=this.state;return(0,n.jsx)("div",{children:(0,n.jsx)(w.P,{renderLabel:"Type of Scan",assistiveText:"Type or use arrow keys to navigate options. Multiple selections allowed.",inputValue:e,isShowingOptions:t,inputRef:e=>this.inputRef=e,onBlur:this.handleBlur,onInputChange:this.handleInputChange,onRequestShowOptions:this.handleShowOptions,onRequestHideOptions:this.handleHideOptions,onRequestHighlightOption:(e,t)=>{this.handleHighlightOption(e,t)},onRequestSelectOption:(e,t)=>{this.handleSelectOption(e,t)},onKeyDown:e=>this.handleKeyDown(e),renderBeforeInput:a.length>0?this.renderTags():null,children:s.length>0?s.map((e,t)=>{if(-1===a.indexOf(e.id))return(0,n.jsx)(w.P.Option,{id:e.id,isHighlighted:e.id===i,isSelected:a.includes(e.id),children:e.label},e.id)}):(0,n.jsx)(w.P.Option,{id:"empty-option",children:"---"},"empty-option")})})}constructor(...e){super(...e),this.state={inputValue:"",isShowingOptions:!1,highlightedOptionId:null,selectedOptionId:this.props.selectedTypeIDs,filteredOptions:this.props.options,announcement:null},this.updateParentState=()=>{let{handleSelectTypeId:e}=this.props;e(this.state.selectedOptionId)},this.filterOptions=e=>{let{selectedOptionId:t}=this.state;return this.props.options.filter(t=>t.label.toLowerCase().startsWith(e.toLowerCase()))},this.handleShowOptions=e=>{this.setState({isShowingOptions:!0})},this.handleHideOptions=e=>{this.setState({isShowingOptions:!1,...this.matchValue()})},this.handleBlur=e=>{this.setState({highlightedOptionId:null})},this.handleHighlightOption=(e,t)=>{let{id:i}=t;if(e.persist(),i){let t=this.getOptionById(i);if(!t)return;this.setState(n=>({highlightedOptionId:i||null,inputValue:"keydown"===e.type?t.label:n.inputValue,announcement:t.label}))}},this.handleSelectOption=(e,t)=>{let{id:i}=t;if(i){let e=this.getOptionById(i);if(!e)return;this.setState(t=>({selectedOptionId:[...t.selectedOptionId,i],highlightedOptionId:null,filteredOptions:this.filterOptions(""),inputValue:"",isShowingOptions:!1,announcement:"".concat(e.label," selected. List collapsed.")}))}},this.handleInputChange=e=>{let t=e.target.value,i=this.filterOptions(t);this.setState({inputValue:t,filteredOptions:i,highlightedOptionId:i.length>0?i[0].id:null,isShowingOptions:!0,announcement:this.getOptionsChangedMessage(i)})},this.handleKeyDown=e=>{let{selectedOptionId:t,inputValue:i}=this.state;"Backspace"===e.key&&""===i&&t.length>0&&this.setState(e=>({highlightedOptionId:null,selectedOptionId:e.selectedOptionId.slice(0,-1)}))}}};var L=i(7484),k=i.n(L),components_AttendanceView=()=>{let[e,t]=(0,a.useState)([]),[i,m]=(0,a.useState)(0),[p,u]=(0,a.useState)(10),[g,f]=(0,a.useState)(0),[S,x]=(0,a.useState)([]),{currentDate:v,setCurrentDate:D}=(0,a.useContext)(h.K),[T,b]=(0,a.useState)("time"),[O,I]=(0,a.useState)("asc"),[y,C]=(0,a.useState)(),[j,N]=(0,a.useState)({beginTime:void 0,endTime:void 0,firstName:void 0,lastName:void 0,sid:void 0,typesOfScan:["ARRIVED","LEFT","ARRIVED_LATE","ARRIVED_INVALID","LEFT_INVALID","INVALID"]}),[w,L]=(0,a.useState)(j);(0,a.useEffect)(()=>{let fetchAttendance=async()=>{var e;console.log(">>>",k()(v).format("YYYY-MM-DD")),await c.Z.get("http://localhost:8080/attendance",{headers:{"Access-Control-Allow-Origin":"http://localhost:8080"},params:{room:"COOR170",date:k()(v).format("YYYY-MM-DD"),startTime:null==j?void 0:j.beginTime,endTime:null==j?void 0:j.endTime,page:i,size:p,sid:null==j?void 0:j.sid,sortBy:T,sortType:O,types:null==j?void 0:null===(e=j.typesOfScan)||void 0===e?void 0:e.join(", ")}}).then(e=>{t(e.data);let a=parseInt(e.headers["total-pages"]);f(a),x(Array.from(Array(a)).map((e,t)=>(0,n.jsx)(s.tl.Page,{onClick:()=>m(t),current:t===i,children:t+1},t)))}).catch(e=>{console.error("Error fetching attendance:",e),t([])})};fetchAttendance()},[v,i,p,j,T,O]);let retrieveTimeFromISODate=e=>{if(!e)return"";{let t=new Date(e).toLocaleString(),[i,n,a]=t.split(" "),[s,r]=n.split(":").map(e=>parseInt(e));return"PM"===a&&12!==s?s+=12:"AM"===a&&12===s&&(s=0),s.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":00"}};return(0,n.jsxs)("div",{className:"mx-32",children:[(0,n.jsx)(DateSelect,{currentDate:v,setCurrentDate:D,disabled:!1}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-center font-medium text-3xl",children:"Attendance Table View"}),(0,n.jsx)("br",{}),(0,n.jsxs)(r.t,{size:"small",toggleLabel:"Column-specific filtering options",summary:"Filtering",children:[(0,n.jsx)(l.G,{display:"inline-block",padding:"small",maxWidth:"15rem",children:(0,n.jsx)(o.l,{renderLabel:"Begin Time",id:"beginTime",placeholder:"Select a Begin Time",step:5,onChange:(e,t)=>{let{value:i}=t;return L(e=>e?{...e,beginTime:i}:e)},onInputChange:(e,t,i)=>L(e=>e?{...e,beginTime:i}:e),value:(null==w?void 0:w.beginTime)?null==w?void 0:w.beginTime:"",allowNonStepInput:!0})}),(0,n.jsx)(l.G,{display:"inline-block",padding:"small",maxWidth:"15rem",children:(0,n.jsx)(o.l,{renderLabel:"End Time",id:"endTime",placeholder:"Select an End Time",step:5,onChange:(e,t)=>{let{value:i}=t;return L(e=>e?{...e,endTime:i}:e)},onInputChange:(e,t,i)=>L(e=>e?{...e,endTime:i}:e),value:(null==w?void 0:w.endTime)?null==w?void 0:w.endTime:"",allowNonStepInput:!0})}),(0,n.jsx)(l.G,{display:"inline-block",padding:"small",width:"25rem",children:(0,n.jsx)(d.o,{renderLabel:"Last Name",placeholder:"Enter exact last name to search",onChange:(e,t)=>L(e=>e?{...e,lastName:t}:e),value:(null==w?void 0:w.lastName)?null==w?void 0:w.lastName:""})}),(0,n.jsx)(l.G,{display:"inline-block",padding:"small",width:"25rem",children:(0,n.jsx)(d.o,{renderLabel:"First Name",placeholder:"Enter exact first name to search",onChange:(e,t)=>L(e=>e?{...e,firstName:t}:e),value:(null==w?void 0:w.firstName)?null==w?void 0:w.firstName:""})}),(0,n.jsx)(l.G,{display:"inline-block",padding:"small",maxWidth:"15rem",children:(0,n.jsx)(d.o,{renderLabel:"ID #",placeholder:"Enter ASU ID",onChange:(e,t)=>L(e=>e?{...e,sid:parseInt(t)}:e),value:(null==w?void 0:w.sid)?(null==w?void 0:w.sid).toString():""})}),(0,n.jsx)("br",{}),(0,n.jsx)(l.G,{display:"inline-block",padding:"small",width:"54rem",children:(0,n.jsx)(MultipleSelect,{options:[{id:"ARRIVED",label:"Arrived",value:"ARRIVED"},{id:"LEFT",label:"Left",value:"LEFT"},{id:"ARRIVED_LATE",label:"Arrived Late",value:"ARRIVED_LATE"},{id:"ARRIVED_INVALID",label:"Arrived Invalid",value:"ARRIVED_INVALID"},{id:"LEFT_INVALID",label:"Left Invalid",value:"LEFT_INVALID"},{id:"INVALID",label:"Invalid",value:"INVALID"}],handleSelectTypeId:e=>{L(t=>t?{...t,typesOfScan:e}:t)},selectedTypeIDs:(null==w?void 0:w.typesOfScan)||[]})}),(0,n.jsx)("button",{className:"filter-btn",onClick:()=>{if(w){let e={beginTime:retrieveTimeFromISODate(w.beginTime),endTime:retrieveTimeFromISODate(w.endTime),firstName:w.firstName,lastName:w.lastName,sid:w.sid,typesOfScan:w.typesOfScan};N(e),m(0)}},children:"Search"}),(0,n.jsx)("button",{className:"filter-btn filter-clr",onClick:()=>{let e={beginTime:void 0,endTime:void 0,firstName:void 0,lastName:void 0,sid:void 0,typesOfScan:["ARRIVED","LEFT","ARRIVED_LATE","ARRIVED_INVALID","LEFT_INVALID","INVALID"]};N(e),L(e),m(0)},children:"Clear"})]}),(0,n.jsx)("br",{}),e.length>0?(0,n.jsx)(SortableTable,{layout:"auto",caption:"Sortable table with attendance records",headers:[{id:"time",text:"Time"},{id:"last",text:"Last"},{id:"first",text:"First"},{id:"sid",text:"ID #"},{id:"type",text:"Type"}],rows:e,handleSorting:e=>{let{sortBy:t,ascending:i}=e;b(t),I(i?"asc":"desc")},sortBy:T}):(0,n.jsx)("p",{children:"No attendance records found."})]}),(0,n.jsxs)("div",{className:"page-size-box",children:[(0,n.jsx)("label",{children:"Page Size:"}),(0,n.jsx)("select",{name:"tourneyStyle",value:p,onChange:e=>{u(parseInt(e.target.value)),m(0)},children:[5,10,25,50,100].map(e=>(0,n.jsxs)("option",{value:e,children:[" ",e," "]},e))})]}),(0,n.jsx)("div",{children:(0,n.jsx)(s.tl,{as:"nav",margin:"large small small",variant:"compact",labelNext:"Next Page",labelPrev:"Previous Page",labelFirst:"First Page",labelLast:"Last Page",withFirstAndLastButton:!1,showDisabledButtons:!0,children:S})})]})},E=i(6228),A=i(9524),R=i(2215),M=i(5394),P=i(1842),components_DateSlider=e=>{let[t,i]=(0,a.useState)(new Date(0)),[s,r]=(0,a.useState)([0,30,60]),[l,o]=(0,a.useState)(0),[d,c]=(0,a.useState)(60),[h,m]=(0,a.useState)(null),[p,u]=(0,a.useState)(null),[g,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let getTimeStamp=e=>60*e.getHours()+e.getMinutes();if(e.timeConfigData&&e.timeConfigData.beginIn&&e.timeConfigData.endIn&&e.timeConfigData.endLate&&e.timeConfigData.beginOut&&e.timeConfigData.endOut){f(!0);let t=new Date(e.timeConfigData.beginIn),n=new Date(e.timeConfigData.endIn),a=new Date(e.timeConfigData.endLate),s=new Date(e.timeConfigData.beginOut),r=new Date(e.timeConfigData.endOut);i(new Date(t.toDateString()));let l=getTimeStamp(t),d=getTimeStamp(r),h=[getTimeStamp(n),getTimeStamp(a),getTimeStamp(s)];o(l),c(d),f(!1),onSliderChange(h)}},[e.timeConfigData,e.refresh,g]);let onSliderChange=i=>{if(g)return;r(i);let n=[];for(let e=0;e<i.length;e++)n.push(new Date(t.getTime()+6e4*i[e]).toISOString());e.onChange(n)};return(0,n.jsx)("div",{className:"slider-container ".concat(e.disabled||0===t.getTime()?"disabled":""),children:(0,n.jsx)(P.Z,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",value:s,renderTrack:(e,t)=>{let i=null===p&&h===t.index||null!==p&&(p===t.index||p+1===t.index);return(0,n.jsxs)("div",{...e,onMouseEnter:()=>m(t.index),onMouseLeave:()=>m(null),children:[(0,n.jsx)("div",{className:"track-hover-area track-hover-area-".concat(t.index)}),(0,n.jsx)("div",{className:"track-tooltip-container track-tooltip-container-".concat(t.index," ").concat(i?"hovered":""),children:(0,n.jsx)("div",{className:"track-tooltip track-tooltip-"+t.index,children:(0,n.jsxs)("p",{children:[0===t.index&&"Arrived On Time",1===t.index&&"Arrived Late",2===t.index&&"Left Early",3===t.index&&"Left On Time"]})})})]})},renderThumb:(e,t)=>(0,n.jsxs)("div",{...e,onMouseDown:()=>u(t.index),onMouseOver:()=>u(t.index),onMouseLeave:()=>u(null),children:[(0,n.jsx)("div",{className:"thumb-hover-area thumb-hover-area-".concat(t.index)}),(0,n.jsx)("div",{className:"time-tooltip",children:(0,n.jsx)("p",{children:function(e){let t=Math.floor(e/60),i=e%60;return"".concat(t%12==0?12:t%12,":").concat(i<10?"0":"").concat(i," ").concat(t>=12?"PM":"AM")}(t.valueNow)})})]}),onChange:onSliderChange,minDistance:5,step:5,min:l,max:d})})};let areTimeConfigsEqual=(e,t)=>void 0===e&&void 0===t||void 0!==e&&void 0!==t&&e.beginIn===t.beginIn&&e.endIn===t.endIn&&e.endLate===t.endLate&&e.beginOut===t.beginOut&&e.endOut===t.endOut;var components_ThresholdBox=()=>{let[e,t]=(0,a.useState)(),[i,s]=(0,a.useState)(),[r,l]=(0,a.useState)(),[o,d]=(0,a.useState)(0);(0,a.useEffect)(()=>{let fetchTimeConfig=async()=>{await c.Z.get("https://api.ams-lti.com/timeConfig/1234").then(e=>{let i=e.data,n=Object.fromEntries(Object.entries(i).map(e=>{let[t,i]=e;return[t,"string"==typeof i?formatTimeToISODate(i):i]}));t(n),s(n)}).catch(e=>{console.error("Error fetching timeConfigData:",e)})};fetchTimeConfig()},[1234]);let formatTimeToISODate=e=>{if(!e)return"";{let[t,i]=null==e?void 0:e.split(":").map(Number),n=new Date;return n.setHours(t,i,0,0),n.toISOString()}},retrieveTimeFromISODate=e=>{if(!e)return"";{let t=new Date(e).toLocaleString(),[i,n,a]=t.split(" "),[s,r]=n.split(":").map(e=>parseInt(e));return"PM"===a&&12!==s?s+=12:"AM"===a&&12===s&&(s=0),s.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":00"}};return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"expand-label",children:"Default Time Config"}),(0,n.jsxs)("div",{className:"specific-config-box",children:[(0,n.jsx)(components_DateSlider,{timeConfigData:e,refresh:o,disabled:!1,onChange:e=>s(t=>t?{...t,endIn:e[0],endLate:e[1],beginOut:e[2]}:t)}),(0,n.jsxs)("div",{className:"btn-box",children:[(0,n.jsx)(M.z,{className:"sub-btn cancel-btn",themeOverride:{mediumPaddingTop:"5px",mediumPaddingBottom:"5px"},onClick:()=>{s(e),d(e=>e+1)},disabled:areTimeConfigsEqual(i,e),children:"Cancel"}),(0,n.jsx)(M.z,{className:"sub-btn",color:"primary",themeOverride:{mediumPaddingTop:"5px",mediumPaddingBottom:"5px"},onClick:()=>{t(i);let updateTimeConfig=async()=>{let e={id:i?i.id:void 0,beginIn:i?retrieveTimeFromISODate(i.beginIn):void 0,endIn:i?retrieveTimeFromISODate(i.endIn):void 0,endLate:i?retrieveTimeFromISODate(i.endLate):void 0,beginOut:i?retrieveTimeFromISODate(i.beginOut):void 0,endOut:i?retrieveTimeFromISODate(i.endOut):void 0};await c.Z.put("https://api.ams-lti.com/timeConfig/1234",e).then(e=>{console.log("Time Config updated:",e.data)}).catch(e=>{console.error("Error updating time config:",e)})};updateTimeConfig()},disabled:areTimeConfigsEqual(i,e),children:"Save"})]})]})]})},B=i(2562),components_SpecThresholdBox=e=>{let{specificDate:t}=e,[i,s]=(0,a.useState)(),[r,l]=(0,a.useState)(),[o,d]=(0,a.useState)(),[h,m]=(0,a.useState)(!0),[p,u]=(0,a.useState)(0);(0,a.useEffect)(()=>{let fetchSpecTimeConfig=async e=>{let[i]=t.toISOString().split("T");try{let e=await c.Z.get("https://api.ams-lti.com/timeConfig/1234/"+i),t=e.data,n=Object.fromEntries(Object.entries(t).map(e=>{let[t,i]=e;return[t,"string"==typeof i?formatTimeToISODate(i):i]}));s(n),l(n),m(!1)}catch(t){console.error("No Specific TimeConfig:",t),s(e),l(e),m(!0)}},fetchDefaultTimeConfig=async()=>{try{let e=await c.Z.get("https://api.ams-lti.com/timeConfig/1234"),t=e.data,i=Object.fromEntries(Object.entries(t).map(e=>{let[t,i]=e;return[t,"string"==typeof i?formatTimeToISODate(i):i]}));d(i),await fetchSpecTimeConfig(i)}catch(e){console.error("Error fetching timeConfigData:",e)}};fetchDefaultTimeConfig()},[1234,t]);let formatTimeToISODate=e=>{if(!e)return"";{let[t,i]=null==e?void 0:e.split(":").map(Number),n=new Date;return n.setHours(t,i,0,0),n.toISOString()}},retrieveTimeFromISODate=e=>{if(!e)return"";{let t=new Date(e).toLocaleString(),[i,n,a]=t.split(" "),[s,r]=n.split(":").map(e=>parseInt(e));return"PM"===a&&12!==s?s+=12:"AM"===a&&12===s&&(s=0),s.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":00"}},handleSave=()=>{s(r);let updateTimeConfig=async()=>{let e={id:r?r.id:void 0,beginIn:r?retrieveTimeFromISODate(r.beginIn):void 0,endIn:r?retrieveTimeFromISODate(r.endIn):void 0,endLate:r?retrieveTimeFromISODate(r.endLate):void 0,beginOut:r?retrieveTimeFromISODate(r.beginOut):void 0,endOut:r?retrieveTimeFromISODate(r.endOut):void 0},[i]=t.toISOString().split("T");await c.Z.put("https://api.ams-lti.com/timeConfig/1234/"+i,e).then(e=>{console.log("Time Config updated:",e.data)}).catch(e=>{console.error("Error updating time config:",e)})};updateTimeConfig()},handleDefaultToggle=async()=>{m(e=>(e?handleSave():handleRevertDefault(),!e))},handleRevertDefault=async()=>{let[e]=t.toISOString().split("T");s(o),l(o),await c.Z.delete("https://api.ams-lti.com/timeConfig/1234/"+e).then(e=>{u(e=>e+1)}).catch(e=>{console.error("Error deleting time config:",e),u(e=>e+1)})};return(0,n.jsxs)("div",{children:[(0,n.jsx)(components_DateSlider,{timeConfigData:i,refresh:p,disabled:h,onChange:e=>l(t=>t?{...t,endIn:e[0],endLate:e[1],beginOut:e[2]}:t)}),(0,n.jsxs)("div",{className:"spec-btn-sect",children:[(0,n.jsx)("div",{className:"use-default-checkbox",children:(0,n.jsx)(B.XZ,{label:"Use Default Time Config",value:"medium",checked:h,onChange:handleDefaultToggle})}),(0,n.jsxs)("div",{className:"btn-box",children:[(0,n.jsx)(M.z,{className:"sub-btn cancel-btn",themeOverride:{mediumPaddingTop:"5px",mediumPaddingBottom:"5px",transform:"all 0.2s ease 0s"},onClick:()=>{l(i),u(e=>e+1)},disabled:areTimeConfigsEqual(r,i),children:"Cancel"}),(0,n.jsx)(M.z,{className:"sub-btn",color:"primary",themeOverride:{mediumPaddingTop:"5px",mediumPaddingBottom:"5px",transform:"all 0.2s ease 0s"},onClick:handleSave,disabled:areTimeConfigsEqual(r,i),children:"Save"})]})]})]})},components_SpecConfigBox=()=>{let{currentDate:e}=(0,a.useContext)(h.K),[t,i]=(0,a.useState)(e);return(0,n.jsxs)("div",{className:"specific-config-box",children:[(0,n.jsx)("div",{className:"date-input-box",children:(0,n.jsx)(DateSelect,{currentDate:t,setCurrentDate:i,disabled:!1})}),(0,n.jsx)(components_SpecThresholdBox,{specificDate:t,setSpecificDate:i})]})},components_SectionConfig=()=>{let[e,t]=(0,a.useState)(),[i,s]=(0,a.useState)(),[r,l]=(0,a.useState)(),h=["M","T","W","Th","F"];(0,a.useEffect)(()=>{let fetchSectionConfig=async()=>{await c.Z.get("https://api.ams-lti.com/courseInfo/1234").then(e=>{let i=e.data;t(i),s(i)}).catch(e=>{console.error("Error fetching courseInfo:",e)})};fetchSectionConfig()},[1234]);let formatTimeToISODate=e=>{if(!e)return"";{let[t,i]=null==e?void 0:e.split(":").map(Number),n=new Date;return n.setHours(t,i,0,0),n.toISOString()}},retrieveTimeFromISODate=e=>{if(!e)return"";{let t=new Date(e).toLocaleString(),[i,n,a]=t.split(" "),[s,r]=n.split(":").map(e=>parseInt(e));return"PM"===a&&12!==s?s+=12:"AM"===a&&12===s&&(s=0),s.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":00"}},handleStartTimeChange=(e,t)=>{let{value:n}=t,a=formatTimeToISODate(null==i?void 0:i.endTime);if(a&&n&&n>a){l({id:"startTime",isError:!0,msg:"Invalid Config"});return}s(e=>e?{...e,startTime:retrieveTimeFromISODate(n)}:e),l({id:"startTime",isError:!1,msg:"Invalid Config"})},handleEndTimeChange=(e,t)=>{let{value:n}=t,a=formatTimeToISODate(null==i?void 0:i.startTime);if(a&&n&&n<a){l({id:"endTime",isError:!0,msg:"Invalid Config"});return}s(e=>e?{...e,endTime:retrieveTimeFromISODate(n)}:e),l({id:"endTime",isError:!1,msg:"Invalid Config"})},handleWeekDaysSelector=(e,t)=>{Array.isArray(null==i?void 0:i.daysOfWeek)&&(null==i?void 0:i.daysOfWeek.includes(t))?s(e=>{if(e){var i;return{...e,daysOfWeek:null==e?void 0:null===(i=e.daysOfWeek)||void 0===i?void 0:i.filter(e=>e!==t)}}return e}):!Array.isArray(null==i?void 0:i.daysOfWeek)||(null==i?void 0:i.daysOfWeek.includes(t))||s(e=>{if(e){var i;return{...e,daysOfWeek:null==e?void 0:null===(i=e.daysOfWeek)||void 0===i?void 0:i.concat(t)}}return e})};return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"expand-label",children:"Section Config"}),(0,n.jsxs)("div",{className:"specific-config-box",children:[(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("label",{children:"Section Name: "}),"\xa0\xa0",(0,n.jsxs)("select",{children:[(0,n.jsx)("option",{value:"sectionA",children:"Section A"}),(0,n.jsx)("option",{value:"sectionB",children:"Section B"})]})]}),(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("label",{children:"Location: "}),"\xa0\xa0\xa0\xa0\xa0",(0,n.jsx)(d.o,{className:"wrapper-text",onChange:(e,t)=>{s(e=>e?{...e,room:t}:e)},value:null==i?void 0:i.room})]}),(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("label",{children:"Weekdays: "}),"\xa0\xa0\xa0",(0,n.jsx)("div",{className:"week-days-container",children:["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY"].map((e,t)=>(0,n.jsx)("button",{className:"day-circle ".concat(Array.isArray(null==i?void 0:i.daysOfWeek)&&(null==i?void 0:i.daysOfWeek.includes(e))?"highlight":""),onClick:t=>handleWeekDaysSelector(t,e),children:h[t]},e))})]}),(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("label",{children:"Start Time: "}),"\xa0\xa0",(0,n.jsx)(o.l,{renderLabel:"",id:"startTime",step:5,onChange:(e,t)=>{let{value:i}=t;return handleStartTimeChange(e,{value:i})},onInputChange:(e,t,i)=>s(e=>e?{...e,startTime:retrieveTimeFromISODate(i)}:e),value:formatTimeToISODate(null==i?void 0:i.startTime),allowNonStepInput:!0,width:"19rem"})]}),(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("label",{children:"End Time: "}),"\xa0\xa0\xa0",(0,n.jsx)(o.l,{renderLabel:"",id:"endTime",step:5,onChange:(e,t)=>{let{value:i}=t;return handleEndTimeChange(e,{value:i})},onInputChange:(e,t,i)=>s(e=>e?{...e,endTime:retrieveTimeFromISODate(i)}:e),value:formatTimeToISODate(null==i?void 0:i.endTime),allowNonStepInput:!0,width:"19rem"})]}),(0,n.jsxs)("div",{className:"btn-box",children:[(0,n.jsx)(M.z,{className:"sub-btn cancel-btn",themeOverride:{mediumPaddingTop:"5px",mediumPaddingBottom:"5px"},onClick:()=>{s(e)},disabled:i===e,children:"Cancel"}),(0,n.jsx)(M.z,{className:"sub-btn",color:"primary",themeOverride:{mediumPaddingTop:"5px",mediumPaddingBottom:"5px"},onClick:()=>{t(i);let updateSectionConfig=async()=>{await c.Z.put("https://api.ams-lti.com/courseInfo/1234",i).then(e=>{console.log("Section Config updated:",e.data)}).catch(e=>{console.error("Error updating time config:",e)})};updateSectionConfig()},disabled:i===e,children:"Save"})]})]})]})};let ConfigTray=class ConfigTray extends a.Component{renderCloseButton(){return(0,n.jsxs)(E.kC,{children:[(0,n.jsx)(E.kC.Item,{shouldGrow:!0,shouldShrink:!0,children:(0,n.jsx)("div",{className:"expand-label",style:{display:"inline-block"},children:"Date Specific Time Config"})}),(0,n.jsx)(E.kC.Item,{children:(0,n.jsx)(A.P,{placement:"end",offset:"small",screenReaderLabel:"Close",onClick:this.hideTray})})]})}render(){let e=a.memo(()=>(0,n.jsx)(R.O,{label:"Tray Example",open:this.state.open,onDismiss:()=>{this.setState({open:!1})},shouldCloseOnDocumentClick:!0,transitionExit:!0,size:"regular",placement:"end",children:(0,n.jsxs)(l.G,{as:"div",padding:"medium",children:[this.renderCloseButton(),(0,n.jsx)(components_SpecConfigBox,{}),(0,n.jsx)(components_ThresholdBox,{}),(0,n.jsx)(components_SectionConfig,{})]})}));return e.displayName="MemoizedTray",(0,n.jsxs)("div",{className:"time-config-btn",children:[(0,n.jsx)(M.z,{onClick:()=>{this.setState({open:!0})},children:"Show Time Config"}),(0,n.jsx)(e,{})]})}constructor(e){super(e),this.hideTray=()=>{this.setState({open:!1})},this.state={open:!1}}};var pages=()=>{let[e,t]=(0,a.useState)(new Date);return(0,n.jsxs)("div",{className:"mt-20",children:[(0,n.jsx)(components_AttendanceView,{}),(0,n.jsx)(ConfigTray,{})]})}}},function(e){e.O(0,[678,885,42,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);